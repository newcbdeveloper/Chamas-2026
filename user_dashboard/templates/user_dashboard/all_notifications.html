{% extends 'user_dashboard/base.html' %}
{% load static %}

{% block title %}
<title>Notifications Center - ChamaSpace</title>
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/notifications.css' %}">
{% endblock %}

{% block content %}
<div class="notifications-frame">
    
    <!-- COMMAND CENTER HEADER -->
<div class="command-header">
  <div class="command-title-row">
    <div class="command-title">
      <h1>Notifications</h1>
      <p class="intelligent-subtitle">You have <span class="urgent-count">{{ urgent_count }}</span> urgent action<span class="urgent-plural">{{ urgent_count|pluralize }}</span> pending</p>
    </div>
    <div class="meta-actions">
      <!-- Search moved here -->
      <div class="search-shortcut-inline">
        <form method="get" action="{% url 'user_dashboard:all_notifications' %}" style="display: flex; align-items: center; gap: 0.5rem;">
          <i class="fas fa-search" style="color: var(--text-muted);"></i>
          <input 
            type="text" 
            name="search" 
            class="cmd-search-inline" 
            placeholder="Search..."
            value="{{ search_query }}"
            style="border: none; outline: none; background: transparent; width: 120px; font-size: 0.875rem; color: var(--text-main);"
          >
          {% if filter_category != 'all' %}
            <input type="hidden" name="category" value="{{ filter_category }}">
          {% endif %}
        </form>
      </div>
      <button class="mark-all-read" onclick="markAllAsRead()">Mark All Read</button>
      <i class="fas fa-cog settings-icon"></i>
    </div>
  </div>

  <!-- Jump-to-bar now in its own dedicated row -->
  <div class="jump-to-container">
    <div class="jump-to-bar">
      <a href="?category=all" class="pill-tab {% if filter_category == 'all' %}active{% endif %}">All</a>
      <a href="?category=deposits" class="pill-tab {% if filter_category == 'deposits' %}active{% endif %}">Deposits</a>
      <a href="?category=withdrawals" class="pill-tab {% if filter_category == 'withdrawals' %}active{% endif %}">Withdrawals</a>
      <a href="?category=goals" class="pill-tab {% if filter_category == 'goals' %}active{% endif %}">Goals</a>
      <a href="?category=mgr" class="pill-tab {% if filter_category == 'mgr' %}active{% endif %}">MGR</a>
    </div>
  </div>
</div>

    <!-- ZONE LABELS (Desktop) - Now clickable for filtering -->
    <div class="zone-label-row">
        <div class="zone-indicator active" onclick="scrollToZone('urgent')" style="cursor: pointer;" title="Jump to Urgent notifications">
            <span class="zone-dot urgent"></span> Urgent
        </div>
        <div class="zone-indicator" onclick="scrollToZone('recent')" style="cursor: pointer;" title="Jump to Recent Activity">
            <span class="zone-dot"></span> Recent Activity
        </div>
        <div class="zone-indicator" onclick="scrollToZone('info')" style="cursor: pointer;" title="Jump to Informational">
            <span class="zone-dot"></span> Informational
        </div>
    </div>

    <!-- SMART TRIAGE ZONES -->
    
    <!-- ZONE 1: ACTION REQUIRED (The Urgent Stack) -->
{% if urgent_notifications %}
<div class="triage-section" id="zone-urgent">
    <div class="section-hdr">
        <h3>Action Required <span class="badge-count">{{ urgent_count }}</span></h3>
        {% if urgent_remaining > 0 and not show_all_urgent %}
        <a href="?show_all_urgent=true{% if filter_category != 'all' %}&category={{ filter_category }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}" 
           style="font-size: 0.8rem; color: var(--primary); font-weight: 600;">
            <i class="fas fa-chevron-down me-1"></i> View all {{ urgent_count }}
        </a>
        {% elif show_all_urgent %}
        <a href="?{% if filter_category != 'all' %}category={{ filter_category }}{% endif %}{% if search_query %}{% if filter_category != 'all' %}&{% endif %}search={{ search_query }}{% endif %}" 
           style="font-size: 0.8rem; color: var(--primary); font-weight: 600;">
            <i class="fas fa-chevron-up me-1"></i> Show less
        </a>
        {% endif %}
    </div>
    
    <div class="urgency-stack" id="urgent-stack">
        {% for notification in urgent_notifications %}
        <div class="urgent-card" data-notification-id="{{ notification.id }}">
            <div class="urgent-sidebar"></div>
            <div class="urgent-icon">
                {% if notification.type == 'contribution' %}
                <i class="fas fa-history"></i>
                {% elif notification.type == 'invitation' %}
                <i class="fas fa-envelope"></i>
                {% elif notification.type == 'low_balance' %}
                <i class="fas fa-exclamation-triangle"></i>
                {% elif notification.type == 'goal_reminder' %}
                <i class="fas fa-bullseye"></i>
                {% endif %}
            </div>
            <div class="urgent-content">
                <h4 class="urgent-title">{{ notification.title }}</h4>
                <div class="urgent-meta">
                    <span>{{ notification.time_ago }}</span> • <span>{{ notification.category }}</span>
                </div>
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 0.5rem;">
                    {{ notification.description }}
                </p>
                <div class="urgent-actions" style="margin-top: 1rem;">
                    {% if notification.type == 'contribution' %}
                    <a href="{{ notification.action_url }}" class="btn-pay">Pay Now</a>
                    <button class="btn-remind" onclick="remindLater('{{ notification.id }}')">Remind Later</button>
                    
                    {% elif notification.type == 'invitation' %}
                    <a href="{% url 'merry_go_round:review_invitation' notification.invitation_token %}" class="btn-pay">
                        <i class="far fa-eye me-1"></i> Review Invitation
                    </a>
                    <button class="btn-remind" onclick="dismissNotification('{{ notification.id }}')">Dismiss</button>
                    
                    {% elif notification.type == 'low_balance' %}
                    <a href="{{ notification.action_url }}" class="btn-pay">Top Up Wallet</a>
                    <button class="btn-remind" onclick="dismissNotification('{{ notification.id }}')">Dismiss</button>
                    
                    {% elif notification.type == 'goal_reminder' %}
                    <a href="{{ notification.action_url }}" class="btn-pay">Contribute Now</a>
                    <button class="btn-remind" onclick="remindLater('{{ notification.id }}')">Remind Later</button>
                    {% endif %}
                </div>
            </div>
            <div class="urgent-secondary">
                <div class="urgent-amount">KES {{ notification.amount|floatformat:2 }}</div>
                <div style="text-align: right; margin-top: 0.5rem; color: #e2e8f0;">
                     <i class="fas fa-check" style="margin-bottom: 0.5rem; display: block; cursor: pointer;" 
                        onclick="markAsRead('{{ notification.id }}')"></i>
                     <i class="fas fa-trash" style="cursor: pointer;" 
                        onclick="deleteNotification('{{ notification.id }}')"></i>
                </div>
            </div>
        </div>
        {% endfor %}
        
        {% if urgent_remaining > 0 and not show_all_urgent %}
        <a href="?show_all_urgent=true{% if filter_category != 'all' %}&category={{ filter_category }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}" 
           style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 12px; font-size: 0.75rem; font-weight: 700; color: var(--text-muted); letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; display: block; text-decoration: none; transition: all 0.2s;">
            <i class="fas fa-chevron-down me-2"></i>
            {{ urgent_remaining }} More Critical Update{{ urgent_remaining|pluralize }}
        </a>
        {% elif show_all_urgent %}
        <a href="?{% if filter_category != 'all' %}category={{ filter_category }}{% endif %}{% if search_query %}{% if filter_category != 'all' %}&{% endif %}search={{ search_query }}{% endif %}" 
           style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 12px; font-size: 0.75rem; font-weight: 700; color: var(--primary); letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; display: block; text-decoration: none; transition: all 0.2s;">
            <i class="fas fa-chevron-up me-2"></i>
            Show Less
        </a>
        {% endif %}
    </div>
</div>
{% endif %}

    <!-- ZONE 2: RECENT ACTIVITY -->
<div class="triage-section" id="zone-recent">
    <div class="section-hdr">
        <h3>Recent Activity</h3>
    </div>

    <div class="daily-log-list">
        {% if user_notifications %}
            {% for notification in user_notifications %}
            <div class="log-item" data-notification-id="notif_{{ notification.id }}">
                <!-- Hover actions (top-right) -->
                <div class="log-item-actions">
                    <i class="fas fa-check action-icon" title="Mark Read" 
                       onclick="markAsRead('notif_{{ notification.id }}')"></i>
                    <i class="fas fa-trash action-icon" title="Delete" 
                       onclick="deleteNotification('notif_{{ notification.id }}')"></i>
                </div>

                <!-- Icon + Content Row -->
                <div class="log-content-row">
                    <div class="log-icon 
                        {% if 'success' in notification.notification_title.lower or 'received' in notification.notification_title.lower %}success
                        {% elif 'fail' in notification.notification_title.lower %}danger
                        {% else %}info{% endif %}">
                        {% if 'success' in notification.notification_title.lower or 'received' in notification.notification_title.lower %}
                            <i class="fas fa-check"></i>
                        {% elif 'deposit' in notification.notification_title.lower %}
                            <i class="fas fa-arrow-up"></i>
                        {% elif 'withdraw' in notification.notification_title.lower %}
                            <i class="fas fa-arrow-down"></i>
                        {% else %}
                            <i class="fas fa-bell"></i>
                        {% endif %}
                    </div>

                    <div class="log-text">
                        <div class="log-title">{{ notification.notification_title }}</div>
                        <div class="log-body">
                            {{ notification.notification_body|safe|truncatewords:20 }}
                        </div>
                        <div class="log-meta">
                            {{ notification.created_at|timesince }} ago • 
                            {% if 'mgr' in notification.notification_body.lower or 'round' in notification.notification_body.lower %}MGR
                            {% elif 'goal' in notification.notification_body.lower %}GOALS
                            {% elif 'deposit' in notification.notification_body.lower %}DEPOSITS
                            {% elif 'withdraw' in notification.notification_body.lower %}WITHDRAWALS
                            {% else %}SYSTEM{% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="log-item" style="justify-content: center; color: var(--text-muted); padding: 1.5rem;">
                No recent activity found.
            </div>
        {% endif %}
    </div>
</div>

    <!-- ZONE 3: INFORMATIONAL (Compact Grid) -->
    {% if informational_notifications %}
    <div class="triage-section" id="zone-info">
        <div class="section-hdr">
            <h3>Informational</h3>
        </div>
        <div class="info-grid">
            {% for notification in informational_notifications %}
            <div class="info-card" data-notification-id="info_{{ notification.id }}">
                <div class="info-card-actions">
                    <i class="fas fa-check action-icon" title="Mark Read" 
                       onclick="markAsRead('info_{{ notification.id }}')"></i>
                    <i class="fas fa-trash action-icon" title="Delete" 
                       onclick="deleteNotification('info_{{ notification.id }}')"></i>
                </div>
                <div class="info-icon"><i class="fas fa-info"></i></div>
                <div class="info-content">
                    <h4>{{ notification.notification_title }}</h4>
                    <p>{{ notification.notification_body|striptags|truncatewords:15 }}</p>
                    <div class="info-meta">{{ notification.created_at|timesince }} ago</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

</div>

<!-- MOBILE UTILITY BAR -->
<div class="mobile-utility-bar">
    <div style="font-weight: 700; color: var(--text-main);">Notifications</div>
    <div style="display: flex; gap: 1rem;">
        <i class="fas fa-filter" style="color: var(--text-muted); font-size: 1.1rem;"></i>
        <i class="fas fa-check-double" style="color: var(--primary); font-size: 1.1rem;" onclick="markAllAsRead()"></i>
    </div>
</div>

<style>
/* Additional Inline overrides if needed for specific template rendering quirks */
body {
    background-color: var(--bg-body);
}

/* Zone indicators hover effect */
.zone-indicator {
    transition: all 0.2s ease;
}

.zone-indicator:hover {
    transform: translateY(-2px);
    opacity: 0.8;
}

/* Smooth scroll behavior */
html {
    scroll-behavior: smooth;
}

/* Info card actions styling */
.info-card {
    position: relative;
}

.info-card-actions {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    display: flex;
    gap: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s ease;
    z-index: 10;
}

.info-card:hover .info-card-actions {
    opacity: 1;
}

.info-card-actions .action-icon {
    cursor: pointer;
    padding: 0.35rem;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.9);
    color: var(--text-muted);
    font-size: 0.85rem;
    transition: all 0.2s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.info-card-actions .action-icon:hover {
    transform: scale(1.1);
    color: var(--text-main);
}

.info-card-actions .fa-check:hover {
    color: #10b981;
    background: rgba(16, 185, 129, 0.1);
}

.info-card-actions .fa-trash:hover {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
}
</style>

<script>
// Get CSRF token for Django AJAX requests
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

const csrftoken = getCookie('csrftoken');

// Show toast notification
function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#10b981' : '#ef4444'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 10000;
        animation: slideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);

/**
 * Scroll to zone function for zone indicators
 */
function scrollToZone(zoneName) {
    const zoneElement = document.getElementById(`zone-${zoneName}`);
    if (zoneElement) {
        // Scroll to the zone with offset for header
        const yOffset = -100; // Adjust based on your header height
        const y = zoneElement.getBoundingClientRect().top + window.pageYOffset + yOffset;
        
        window.scrollTo({ top: y, behavior: 'smooth' });
        
        // Update active state on zone indicators
        document.querySelectorAll('.zone-indicator').forEach(indicator => {
            indicator.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        // Flash the zone briefly
        zoneElement.style.transition = 'background-color 0.3s ease';
        const originalBg = zoneElement.style.backgroundColor;
        zoneElement.style.backgroundColor = 'rgba(59, 130, 246, 0.1)';
        setTimeout(() => {
            zoneElement.style.backgroundColor = originalBg;
        }, 600);
    }
}

/**
 * Mark a single notification as read
 */
async function markAsRead(notificationId) {
    try {
        const response = await fetch("{% url 'user_dashboard:mark_notification_read' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': csrftoken
            },
            body: new URLSearchParams({
                'notification_id': notificationId
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Remove the notification from DOM
            const notificationElement = document.querySelector(`[data-notification-id="${notificationId}"]`);
            if (notificationElement) {
                notificationElement.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notificationElement.remove(), 300);
            }
            
            showToast('Notification marked as read', 'success');
            
            // Update urgent count if it's an urgent notification
            if (notificationId.startsWith('contribution_') || notificationId.startsWith('invitation_') || 
                notificationId.startsWith('low_balance') || notificationId.startsWith('goal_reminder')) {
                updateUrgentCount(-1);
            }
        } else {
            showToast(data.error || 'Failed to mark as read', 'error');
        }
    } catch (error) {
        console.error('Error marking notification as read:', error);
        showToast('Network error. Please try again.', 'error');
    }
}

/**
 * Delete a notification
 */
async function deleteNotification(notificationId) {
    if (!confirm('Are you sure you want to delete this notification?')) {
        return;
    }
    
    try {
        const response = await fetch("{% url 'user_dashboard:delete_notification' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': csrftoken
            },
            body: new URLSearchParams({
                'notification_id': notificationId
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Remove the notification from DOM
            const notificationElement = document.querySelector(`[data-notification-id="${notificationId}"]`);
            if (notificationElement) {
                notificationElement.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notificationElement.remove(), 300);
            }
            
            showToast('Notification deleted successfully', 'success');
            
            // Update urgent count if it's an urgent notification
            if (notificationId.startsWith('contribution_') || notificationId.startsWith('invitation_') || 
                notificationId.startsWith('low_balance') || notificationId.startsWith('goal_reminder')) {
                updateUrgentCount(-1);
            }
        } else {
            showToast(data.error || 'Failed to delete notification', 'error');
        }
    } catch (error) {
        console.error('Error deleting notification:', error);
        showToast('Network error. Please try again.', 'error');
    }
}

/**
 * Mark all notifications as read
 */
async function markAllAsRead() {
    if (!confirm('Mark all notifications as read?')) {
        return;
    }
    
    try {
        const response = await fetch("{% url 'user_dashboard:mark_all_read' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': csrftoken
            }
        });
        
        const data = await response.json();
        
        if (data.success) {
            showToast(data.message, 'success');
            
            // Reload the page to reflect changes
            setTimeout(() => location.reload(), 1500);
        } else {
            showToast(data.error || 'Failed to mark all as read', 'error');
        }
    } catch (error) {
        console.error('Error marking all as read:', error);
        showToast('Network error. Please try again.', 'error');
    }
}

/**
 * Remind later (snooze notification)
 */
async function remindLater(notificationId, hours = 24) {
    try {
        const response = await fetch("{% url 'user_dashboard:remind_later' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': csrftoken
            },
            body: new URLSearchParams({
                'notification_id': notificationId,
                'snooze_hours': hours
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Temporarily hide the notification
            const notificationElement = document.querySelector(`[data-notification-id="${notificationId}"]`);
            if (notificationElement) {
                notificationElement.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notificationElement.style.display = 'none', 300);
            }
            
            showToast(`Reminder set for ${hours} hours from now`, 'success');
            updateUrgentCount(-1);
        } else {
            showToast(data.error || 'Failed to set reminder', 'error');
        }
    } catch (error) {
        console.error('Error setting reminder:', error);
        showToast('Network error. Please try again.', 'error');
    }
}

/**
 * Dismiss notification (for non-critical alerts)
 */
async function dismissNotification(notificationId) {
    try {
        const response = await fetch("{% url 'user_dashboard:dismiss_notification' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': csrftoken
            },
            body: new URLSearchParams({
                'notification_id': notificationId
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Remove the notification from DOM
            const notificationElement = document.querySelector(`[data-notification-id="${notificationId}"]`);
            if (notificationElement) {
                notificationElement.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notificationElement.remove(), 300);
            }
            
            showToast('Notification dismissed', 'success');
            updateUrgentCount(-1);
        } else {
            showToast(data.error || 'Failed to dismiss notification', 'error');
        }
    } catch (error) {
        console.error('Error dismissing notification:', error);
        showToast('Network error. Please try again.', 'error');
    }
}

/**
 * Toggle expanded view of urgent notifications
 */
/**
 * Toggle expanded view of urgent notifications
 * Now uses URL parameter to show/hide all urgent notifications
 */
function toggleUrgentExpand() {
    const urlParams = new URLSearchParams(window.location.search);
    const currentlyExpanded = urlParams.get('show_all_urgent') === 'true';
    
    if (currentlyExpanded) {
        // Collapse - remove the parameter
        urlParams.delete('show_all_urgent');
    } else {
        // Expand - add the parameter
        urlParams.set('show_all_urgent', 'true');
    }
    
    // Preserve other query parameters (category, search)
    const newUrl = window.location.pathname + '?' + urlParams.toString();
    
    // Reload with new parameters
    window.location.href = newUrl;
}

// Update button text based on expand state
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const isExpanded = urlParams.get('show_all_urgent') === 'true';
    
    // Update "View all X" link text if it exists
    const viewAllLink = document.querySelector('a[onclick*="toggleUrgentExpand"]');
    if (viewAllLink && isExpanded) {
        viewAllLink.textContent = 'Show less';
        viewAllLink.innerHTML = '<i class="fas fa-chevron-up me-1"></i> Show less';
    }
    
    // Update "+X more" text if it exists
    const moreUpdatesDiv = document.querySelector('[onclick*="toggleUrgentExpand"]');
    if (moreUpdatesDiv && isExpanded) {
        moreUpdatesDiv.textContent = 'Show less';
        moreUpdatesDiv.style.cursor = 'pointer';
    }
});

/**
 * Update urgent count badge and subtitle
 */
function updateUrgentCount(delta) {
    const countElement = document.querySelector('.urgent-count');
    const subtitleElement = document.querySelector('.intelligent-subtitle');
    const pluralElement = document.querySelector('.urgent-plural');
    
    if (countElement) {
        const currentCount = parseInt(countElement.textContent) || 0;
        const newCount = Math.max(0, currentCount + delta);
        countElement.textContent = newCount;
        
        // Update plural text
        if (pluralElement) {
            pluralElement.textContent = newCount === 1 ? '' : 's';
        }
        
        // Update subtitle text
        if (subtitleElement) {
            subtitleElement.innerHTML = `You have <span class="urgent-count">${newCount}</span> urgent action<span class="urgent-plural">${newCount === 1 ? '' : 's'}</span> pending`;
        }
    }
}

/**
 * Handle "Pay Now" action for contributions
 */
function payNow(contributionId) {
    window.location.href = `/merry-go-round/wallet/?contribution_id=${contributionId}`;
}

/**
 * Handle "View Invitation" action
 */
function viewInvitation(invitationToken) {
    window.location.href = `/merry-go-round/invitation/${invitationToken}/`;
}

/**
 * Handle "Top Up Wallet" action
 */
function topUpWallet() {
    window.location.href = '/merry-go-round/transfer-from-main/';
}

/**
 * Handle "Contribute Now" to goal
 */
function contributeToGoal(goalId) {
    window.location.href = `/goals/goal/${goalId}/`;
}

console.log('Notification actions loaded successfully');
</script>

{% endblock %}